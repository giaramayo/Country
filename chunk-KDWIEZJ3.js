import{$ as _,A as G,B as Y,C as r,D as i,E as s,F as Q,G as g,H as T,I as J,J as a,K as y,L as R,M as B,N as he,O,P as z,R as se,S as ue,T as E,U as be,V as Se,W as K,Y as xe,a as le,aa as Re,b as pe,ba as N,c as C,ca as W,d as V,da as Ee,e as D,f as A,g as me,h as U,i as de,j as p,k as ye,l as P,m as I,n as q,o as j,p as fe,q as f,r as ge,s as $,t as c,u as m,v as H,w as d,x as Ce,y as x,z as ve}from"./chunk-PVGW3HXF.js";var X=class o{static \u0275fac=function(n){return new(n||o)};static \u0275cmp=m({type:o,selectors:[["country-top-menu"]],decls:17,vars:0,consts:[[1,"p-4","w-full"],[1,"menu","bg-base-200","sm:menu-horizontal","rounded-box"],["routerLink","by-country","routerLinkActive","btn-primary",1,"btn"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 32 32"],["fill","currentColor","d","M3.406 3.969L3.344 5.25L3 14.031l-.031.781l.75.22l6.406 1.937l-5.438 3.781l-1.53 1.063l1.718.687l2.844 1.125l.375.156l.375-.156l10-4.156l6.406 1.937c1.688.508 3.492-.472 4-2.156c.508-1.688-.473-3.492-2.156-4L21.03 13.5l-3.78-6.25l-.219-.344l-.375-.125L14 6.063l-1.469-.375l.219 1.5l.531 3.906l-4.25-1.313l-1.625-4.187l-.187-.469l-.469-.156l-2.125-.625zm1.875 2.656l.438.125l1.593 4.188l.157.468l.468.125l18.188 5.625a1.19 1.19 0 0 1 .813 1.5a1.19 1.19 0 0 1-1.5.813l-6.75-2.032l-.344-.093l-.313.125l-9.937 4.156l-.75-.313l5.625-3.875l1.719-1.187l-2-.594l-7.657-2.312zm9.625 1.781l.813.219l2.437 3.969l-2.812-.844zM20.5 21a1.5 1.5 0 1 0 0 3a1.5 1.5 0 0 0 0-3M3 26v2h26v-2z"],["routerLink","by-capital","routerLinkActive","btn-primary",1,"btn"],["fill","currentColor","d","M22 3c-3.301 0-6 2.699-6 6c0 .992.383 2.004.875 3.125a35 35 0 0 0 1.75 3.406a62 62 0 0 0 2.563 4.031L22 20.75l.813-1.188s1.288-1.836 2.562-4.03a35 35 0 0 0 1.75-3.407C27.617 11.004 28 9.992 28 9c0-3.301-2.699-6-6-6M11.969 4.938L4 8.344V27.53l8.031-3.468l8 3L28 23.655v-8.718a49 49 0 0 1-2 3.437v3.969l-5 2.125v-1.625l-1.469-2.125c-.156-.227-.34-.497-.531-.782v4.625l-6-2.25V7.438l1.094.407a8 8 0 0 1 .531-1.938zM22 5c2.219 0 4 1.781 4 4c0 .387-.241 1.3-.688 2.313c-.445 1.011-1.074 2.16-1.687 3.218c-.816 1.406-1.168 1.908-1.625 2.596c-.457-.688-.809-1.19-1.625-2.596c-.613-1.059-1.241-2.207-1.688-3.219C18.242 10.302 18 9.387 18 9c0-2.219 1.781-4 4-4M11 7.5v14.844l-5 2.125V9.656z"],["routerLink","by-region","routerLinkActive","btn-primary",1,"btn"],["fill","currentColor","d","M15 5v2H5v9h20.469l.281-.344l3.563-4.156l-3.563-4.156L25.469 7H17V5zM7 9h17.531l2.157 2.5L24.53 14H7zm8 8v10h2V17z"]],template:function(n,t){n&1&&(r(0,"nav",0)(1,"ul",1)(2,"li")(3,"a",2),q(),r(4,"svg",3),s(5,"path",4),i(),a(6," Por pa\xEDs "),i()(),j(),r(7,"li")(8,"a",5),q(),r(9,"svg",3),s(10,"path",6),i(),a(11," Por capital "),i()(),j(),r(12,"li")(13,"a",7),q(),r(14,"svg",3),s(15,"path",8),i(),a(16," Por region "),i()()()())},dependencies:[W,Ee],encapsulation:2})};var Z=class o{static \u0275fac=function(n){return new(n||o)};static \u0275cmp=m({type:o,selectors:[["app-country-layout"]],decls:3,vars:0,consts:[[1,"px-4"]],template:function(n,t){n&1&&(s(0,"country-top-menu"),r(1,"section",0),s(2,"router-outlet"),i())},dependencies:[Re,X],encapsulation:2})};var F=class o{placeholder=f("Buscar");debounceTime=f(1e3);initialValue=f();value=fe();inputValue=E(()=>this.initialValue()??"");debounceEffect=ue(e=>{let n=this.inputValue(),t=setTimeout(()=>{this.value.emit(n)},this.debounceTime());e(()=>{clearTimeout(t)})});static \u0275fac=function(n){return new(n||o)};static \u0275cmp=m({type:o,selectors:[["country-search-input"]],inputs:{placeholder:[1,"placeholder"],debounceTime:[1,"debounceTime"],initialValue:[1,"initialValue"]},outputs:{value:"value"},decls:5,vars:2,consts:[["txtSearch",""],[1,"flex","flex-row","gap-2","mt-2"],["type","text","autofocus","",1,"input","input-bordered","mr-2","w-56",3,"keyup.enter","keyup","placeholder","value"],[1,"btn","btn-primary",3,"click"]],template:function(n,t){if(n&1){let u=Q();r(0,"section",1)(1,"input",2,0),g("keyup.enter",function(){P(u);let M=J(2);return I(t.value.emit(M.value))})("keyup",function(){P(u);let M=J(2);return I(t.inputValue.set(M.value))}),i(),r(3,"button",3),g("click",function(){P(u);let M=J(2);return I(t.value.emit(M.value))}),a(4," Buscar "),i()()}n&2&&(c(),d("placeholder",t.placeholder())("value",t.inputValue()))},encapsulation:2})};var _e=o=>["/country/by",o],we=(o,e)=>e.cca2;function Me(o,e){if(o&1&&(r(0,"tr")(1,"td"),a(2),i(),r(3,"td"),a(4),i(),r(5,"td"),s(6,"img",2),i(),r(7,"td"),a(8),i(),r(9,"td"),a(10),i(),r(11,"td")(12,"span",3),a(13),O(14,"number"),i()(),r(15,"td")(16,"a",4),a(17,"M\xE1s informaci\xF3n"),i()()()),o&2){let n=e.$implicit,t=e.$index;c(2),y(t+1),c(2),y(n.flag),c(2),d("src",n.flagSvg,$)("alt",n.name),c(2),y(n.name),c(2),y(n.capital),c(3),R(" ",z(14,8,n.population)," "),c(3),d("routerLink",he(10,_e,n.cca2))}}function ke(o,e){if(o&1&&(r(0,"tr")(1,"td",5),a(2),i()()),o&2){let n=T();c(2),R(" ",n.errorMessage()," ")}}function Te(o,e){o&1&&(r(0,"tr")(1,"td",5),a(2,"No se encontraron resultados"),i()())}function Le(o,e){o&1&&(r(0,"tr")(1,"td",5),a(2,"Buscando pa\xEDses"),i()())}var w=class o{countries=f.required();errorMessage=f();isLoading=f(!1);isEmpty=f(!1);static \u0275fac=function(n){return new(n||o)};static \u0275cmp=m({type:o,selectors:[["country-list"]],inputs:{countries:[1,"countries"],errorMessage:[1,"errorMessage"],isLoading:[1,"isLoading"],isEmpty:[1,"isEmpty"]},decls:23,vars:3,consts:[[1,"mt-5"],[1,"table","table-md","mt-2","w-full"],[1,"w-10",3,"src","alt"],[1,"badge","badge-secondary"],[1,"link-primary","cursor-pointer",3,"routerLink"],["colspan","8",1,"text-center"]],template:function(n,t){n&1&&(r(0,"section",0)(1,"table",1)(2,"thead")(3,"tr")(4,"th"),a(5,"#"),i(),r(6,"th"),a(7,"\xCDcono"),i(),r(8,"th"),a(9,"Bandera"),i(),r(10,"th"),a(11,"Nombre"),i(),r(12,"th"),a(13,"Capital"),i(),r(14,"th"),a(15,"Poblaci\xF3n"),i(),s(16,"th"),i()(),r(17,"tbody"),G(18,Me,18,12,"tr",null,we),H(20,ke,3,1,"tr")(21,Te,3,0,"tr")(22,Le,3,0,"tr"),i()()()),n&2&&(c(18),Y(t.countries()),c(2),x(t.errorMessage()?20:-1),c(),x(t.countries().length===0&&!t.isLoading()?21:-1),c(),x(t.isLoading()?22:-1))},dependencies:[K,W],encapsulation:2})};var L=class{static mapRestCountryToCountry(e){return{capital:e.capital?.join(","),cca2:e.cca2,flag:e.flag,flagSvg:e.flags.svg,name:e.translations.spa.common??"No Spanish Name",population:e.population,region:e.region,subRegion:e.subregion}}static mapRestCountryArrayToCountryArray(e){return e.map(this.mapRestCountryToCountry)}};var ee="https://restcountries.com/v3.1",h=class o{http=p(xe);queryCacheCapital=new Map;queryCacheCountry=new Map;queryCacheRegion=new Map;searchByCapital(e){return e=e.toLowerCase(),this.queryCacheCapital.has(e)?C(this.queryCacheCapital.get(e)??[]):this.http.get(`${ee}/capital/${e}`).pipe(D(n=>L.mapRestCountryArrayToCountryArray(n)),U(n=>this.queryCacheCapital.set(e,n)),A(n=>(console.log("Error fetching ",n),V(()=>new Error(`No se pudo obtener pa\xEDses con ese query ${e}`)))))}searchByCountry(e){let n=`${ee}/name/${e}`;return e=e.toLowerCase(),this.queryCacheCountry.has(e)?C(this.queryCacheCountry.get(e)??[]):this.http.get(n).pipe(D(t=>L.mapRestCountryArrayToCountryArray(t)),U(t=>this.queryCacheCountry.set(e,t)),me(2e3),A(t=>(console.log("Error fetching ",t),V(()=>new Error(`No se pudo obtener pa\xEDses con ese query ${e}`)))))}searchByRegion(e){let n=`${ee}/region/${e}`;return this.queryCacheRegion.has(e)?C(this.queryCacheRegion.get(e)??[]):this.http.get(n).pipe(D(t=>L.mapRestCountryArrayToCountryArray(t)),U(t=>this.queryCacheRegion.set(e,t)),A(t=>(console.log("Error fetching ",t),V(()=>new Error(`No se pudo obtener pa\xEDses con ese query ${e}`)))))}searchCountryByAlphaCode(e){let n=`${ee}/alpha/${e}`;return this.http.get(n).pipe(D(t=>L.mapRestCountryArrayToCountryArray(t)),D(t=>t.at(0)),A(t=>(console.log("Error fetching ",t),V(()=>new Error(`No se pudo obtener pa\xEDses con ese c\xF3digo ${e}`)))))}static \u0275fac=function(n){return new(n||o)};static \u0275prov=de({token:o,factory:o.\u0275fac,providedIn:"root"})};function S(o){return o?.injector||ye(S),be(pe(le({},o),{loader:void 0,stream:e=>{let n,t=()=>n.unsubscribe();e.abortSignal.addEventListener("abort",t);let u=ge({value:void 0}),l,M=new Promise(k=>l=k);function ce(k){u.set(k),l?.(u),l=void 0}return n=o.loader(e).subscribe({next:k=>ce({value:k}),error:k=>{ce({error:k}),e.abortSignal.removeEventListener("abort",t)},complete:()=>{l&&ce({error:new Error("Resource completed before producing a value")}),e.abortSignal.removeEventListener("abort",t)}}),M}}))}var De=()=>[],te=class o{countryService=p(h);activatedRoute=p(_);router=p(N);queryParam=this.activatedRoute.snapshot.queryParamMap.get("query")??"";query=E(()=>this.queryParam);countryResource=S({request:()=>({query:this.query()}),loader:({request:e})=>e.query?(this.router.navigate(["/country/by-capital"],{queryParams:{query:e.query}}),this.countryService.searchByCapital(e.query)):C([])});static \u0275fac=function(n){return new(n||o)};static \u0275cmp=m({type:o,selectors:[["by-capital-page"]],decls:2,vars:7,consts:[["placeholder","Buscar por capital",3,"value","debounceTime","initialValue"],[3,"countries","errorMessage","isEmpty","isLoading"]],template:function(n,t){if(n&1&&(r(0,"country-search-input",0),g("value",function(l){return t.query.set(l)}),i(),s(1,"country-list",1)),n&2){let u,l;d("debounceTime",300)("initialValue",t.query()),c(),d("countries",(u=t.countryResource.value())!==null&&u!==void 0?u:B(6,De))("errorMessage",t.countryResource.error())("isEmpty",((l=t.countryResource.value())==null?null:l.length)===0)("isLoading",t.countryResource.isLoading())}},dependencies:[F,w],encapsulation:2})};var Pe=()=>[],ne=class o{countryService=p(h);activatedRoute=p(_);router=p(N);queryParam=this.activatedRoute.snapshot.queryParamMap.get("query")??"";query=E(()=>this.queryParam);countryResource=S({request:()=>({query:this.query()}),loader:({request:e})=>e.query?(this.router.navigate(["/country/by-country"],{queryParams:{query:e.query}}),this.countryService.searchByCountry(e.query)):C([])});static \u0275fac=function(n){return new(n||o)};static \u0275cmp=m({type:o,selectors:[["by-country-page"]],decls:2,vars:6,consts:[["placeholder","Buscar por pa\xEDs",3,"value","initialValue"],[3,"countries","errorMessage","isEmpty","isLoading"]],template:function(n,t){if(n&1&&(r(0,"country-search-input",0),g("value",function(l){return t.query.set(l)}),i(),s(1,"country-list",1)),n&2){let u,l;d("initialValue",t.query()),c(),d("countries",(u=t.countryResource.value())!==null&&u!==void 0?u:B(5,Pe))("errorMessage",t.countryResource.error())("isEmpty",((l=t.countryResource.value())==null?null:l.length)===0)("isLoading",t.countryResource.isLoading())}},dependencies:[F,w],encapsulation:2})};var Ie=()=>[];function qe(o,e){if(o&1){let n=Q();r(0,"button",6),g("click",function(){let u=P(n).$implicit,l=T();return I(l.selectedRegion.set(u))}),a(1),i()}if(o&2){let n=e.$implicit,t=T();Ce("btn-primary",t.selectedRegion()===n),c(),R(" ",n," ")}}function Be(o){return o=o.toLowerCase(),{africa:"Africa",americas:"Americas",asia:"Asia",europe:"Europe",oceania:"Oceania",antarctic:"Antarctic"}[o]??"Americas"}var oe=class o{countryService=p(h);regions=["Africa","Americas","Asia","Europe","Oceania","Antarctic"];activatedRoute=p(_);router=p(N);queryParam=this.activatedRoute.snapshot.queryParamMap.get("region")??"";selectedRegion=E(()=>Be(this.queryParam));countryResource=S({request:()=>({region:this.selectedRegion()}),loader:({request:e})=>(console.log({request:e.region}),e.region?(this.router.navigate(["/country/by-region"],{queryParams:{region:e.region}}),this.countryService.searchByRegion(e.region)):C([]))});static \u0275fac=function(n){return new(n||o)};static \u0275cmp=m({type:o,selectors:[["by-region-page"]],decls:9,vars:5,consts:[[1,"text-2xl"],[1,"text-lg"],[1,"row","mt-2"],[1,"flex-col"],[1,"btn","mr-2","btn-outline","w-[100px]",3,"btn-primary"],[3,"countries","errorMessage","isEmpty","isLoading"],[1,"btn","mr-2","btn-outline","w-[100px]",3,"click"]],template:function(n,t){if(n&1&&(r(0,"h1",0),a(1,"Por regi\xF3n"),i(),r(2,"h3",1),a(3,"Seleccione una regi\xF3n"),i(),r(4,"section",2)(5,"div",3),G(6,qe,2,3,"button",4,ve),i()(),s(8,"country-list",5)),n&2){let u,l;c(6),Y(t.regions),c(2),d("countries",(u=t.countryResource.value())!==null&&u!==void 0?u:B(4,Ie))("errorMessage",t.countryResource.error())("isEmpty",((l=t.countryResource.value())==null?null:l.length)===0)("isLoading",t.countryResource.isLoading())}},dependencies:[w],encapsulation:2})};var re=class o{country=f.required();currentYear=se(()=>new Date().getFullYear());static \u0275fac=function(n){return new(n||o)};static \u0275cmp=m({type:o,selectors:[["country-information-pages"]],inputs:{country:[1,"country"]},decls:42,vars:18,consts:[[1,"mx-10"],[1,"text-3xl"],[1,"text-xl","font-thin"],[1,"stats","shadow","mx-5"],[1,"stat","place-items-center"],[1,"stat-title"],[1,"stat-value"],[1,"stat-desc"],[1,"stat-value","text-secondary"],[1,"stat-desc","text-secondary"],[1,"diff","aspect-[16/9]"],[1,"diff-item-1"],[3,"alt","src"],[1,"diff-item-2"],[1,"blur","brightness-75",3,"alt","src"],[1,"diff-resizer"]],template:function(n,t){n&1&&(r(0,"section",0)(1,"h1",1),a(2),i(),r(3,"h2",2),a(4),O(5,"number"),i()(),r(6,"section",3)(7,"div",4)(8,"div",5),a(9,"Poblaci\xF3n"),i(),r(10,"div",6),a(11),O(12,"number"),i(),r(13,"div",7),a(14),i()(),r(15,"div",4)(16,"div",5),a(17,"Nombre"),i(),r(18,"div",8),a(19),i(),r(20,"div",9),a(21),i()(),r(22,"div",4)(23,"div",5),a(24,"Sub Region"),i(),r(25,"div",6),a(26),i(),r(27,"div",7),a(28),i()(),r(29,"div",4)(30,"div",5),a(31,"Bandera"),i(),r(32,"div",6),a(33),i(),r(34,"div",7),a(35),i()()(),r(36,"section",10)(37,"div",11),s(38,"img",12),i(),r(39,"div",13),s(40,"img",14),i(),s(41,"div",15),i()),n&2&&(c(2),y(t.country().name),c(2),R(" Poblaci\xF3n ",z(5,14,t.country().population)," "),c(7),y(z(12,16,t.country().population)),c(3),R("Desde ",t.currentYear(),""),c(5),y(t.country().name),c(2),y(t.country().region),c(5),y(t.country().subRegion),c(2),y(t.country().region),c(5),y(t.country().flag),c(2),y(t.country().subRegion),c(3),d("alt",t.country().name)("src",t.country().flagSvg,$),c(2),d("alt",t.country().name)("src",t.country().flagSvg,$))},dependencies:[K],encapsulation:2})};var ie=class o{location=p(Se);goBack(){this.location.back()}static \u0275fac=function(n){return new(n||o)};static \u0275cmp=m({type:o,selectors:[["app-not-found"]],decls:10,vars:0,consts:[[1,"flex","flex-col","items-center","justify-center","mt-10"],["xmlns","http://www.w3.org/2000/svg","width","75","height","75","viewBox","0 0 24 24"],["width","24","height","24","fill","none"],["fill","none","stroke","currentColor","stroke-linecap","round","stroke-width","2"],["stroke-linejoin","round","d","M14 19c3.771 0 5.657 0 6.828-1.172S22 14.771 22 11s0-5.657-1.172-6.828S17.771 3 14 3h-4C6.229 3 4.343 3 3.172 4.172S2 7.229 2 11s0 5.657 1.172 6.828c.653.654 1.528.943 2.828 1.07"],["d","M14 19c-1.236 0-2.598.5-3.841 1.145c-1.998 1.037-2.997 1.556-3.489 1.225s-.399-1.355-.212-3.404L6.5 17.5m3.379-8.621L12 11m0 0l2.121 2.121M12 11l2.121-2.121M12 11l-2.121 2.121"],[1,"link-primary","cursor-pointer",3,"click"]],template:function(n,t){n&1&&(r(0,"section",0),q(),r(1,"svg",1),s(2,"rect",2),r(3,"g",3),s(4,"path",4)(5,"path",5),i()(),j(),r(6,"h1"),a(7,"No se encontr\xF3 el pa\xEDs"),i(),r(8,"a",6),g("click",function(){return t.goBack()}),a(9,"Regresar"),i()())},encapsulation:2})};function Ne(o,e){o&1&&s(0,"app-not-found")}function Fe(o,e){o&1&&(r(0,"h1",0),a(1,"Cargando..."),i())}function Ve(o,e){if(o&1&&s(0,"country-information-pages",1),o&2){let n=T();d("country",n.countryResource.value())}}var ae=class o{countryCode=p(_).snapshot.params.code;countryService=p(h);countryResource=S({request:()=>({code:this.countryCode}),loader:({request:e})=>this.countryService.searchCountryByAlphaCode(e.code)});static \u0275fac=function(n){return new(n||o)};static \u0275cmp=m({type:o,selectors:[["country-page"]],decls:3,vars:3,consts:[[1,"text-3xl"],[3,"country"]],template:function(n,t){n&1&&H(0,Ne,1,0,"app-not-found")(1,Fe,2,0,"h1",0)(2,Ve,1,1,"country-information-pages",1),n&2&&(x(t.countryResource.error()?0:-1),c(),x(t.countryResource.isLoading()?1:-1),c(),x(t.countryResource.hasValue()?2:-1))},dependencies:[ie,re],encapsulation:2})};var Ae=[{path:"",component:Z,children:[{path:"by-capital",component:te},{path:"by-country",component:ne},{path:"by-region",component:oe},{path:"by/:code",component:ae},{path:"**",redirectTo:"by-capital"}]}],fn=Ae;export{Ae as countryRoutes,fn as default};
